
<!DOCTYPE html>
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta name="viewport" content="width=device-width" />
    <title>网站设置</title>
    <link rel="stylesheet" href="__PUBLIC__/Azureadmin/Content/css/bootstrap.min.css" />
    <link rel="stylesheet" href="__PUBLIC__/Azureadmin/Content/css/bootstrap-responsive.min.css" />
    <link rel="stylesheet" href="__PUBLIC__/Azureadmin/Content/css/unicorn.main.css" />
    <link rel="stylesheet" href="__PUBLIC__/Azureadmin/Content/css/unicorn.jcs.css" class="skin-color" />
    <link rel="stylesheet" href="__PUBLIC__/Azureadmin/Scripts/Lib/artDialog/skins/twitter.css" />
    <link rel="stylesheet" href="__PUBLIC__/Azureadmin/Content/css/global.css" />

    
    <style type="text/css">
        #wall div.widget-box {
            background: none repeat scroll 0 0 #F9F9F9;
            border-top: 1px solid #CDCDCD;
            border-left: 1px solid #CDCDCD;
            border-right: 1px solid #CDCDCD;
            clear: both;
            margin-top: 0;
            margin-bottom: 0;
            position: relative;
        }

        #wall body {
            overflow: hidden;
            background-color: white;
        }

        #wall span > label {
            display: inline-block;
            width: 130px;
        }

        #wall .blockdiv input[type=text] {
            width: 250px;
        }

        #wall .blockdiv {
            padding: 5px 20px;
        }

        #wall span div {
            display: inline;
        }

        #wall .radiolabel {
            width: 60px;
        }

            #wall .radiolabel input {
                vertical-align: sub;
            }

        #wall span.btn-group {
            margin: 0 5px 5px 0;
            margin-left: 0 !important;
        }

        #wall object {
            margin: 2px 10px;
        }

        #wall #teacherspan label {
            width: 40px;
            overflow: hidden;
        }

        #wall .DeleteBtn {
            border-top-right-radius: 4px;
            padding-right: 8px;
            padding-left: 8px;
        }

        #wall .htextarea {
            height: 80px;
        }

        #wall .controls > label {
            display: inline-block;
            width: 70px;
        }
    </style>

</head>
<body>
    <link href="__PUBLIC__/Azureadmin/Content/Home/_partialhead.css" rel="stylesheet" />
<link href="__PUBLIC__/Azureadmin/Content/ComMessage/commessage.css" rel="stylesheet" />
<script type="text/javascript">
    var resource = '{$resource}';
    var controller = '{$controller}';    
</script>
<script src="__PUBLIC__/Azureadmin/Scripts/Lib/jquery.js" type="text/javascript"></script>
<script src="__PUBLIC__/Azureadmin/Scripts/Home/_partialhead.js" type="text/javascript"></script>
<script src="__PUBLIC__/Azureadmin/Scripts/ComMessage/ComMessage-common.js"></script>

<div id="header">
    <h1><span>机构服务平台</span></h1>
</div>

<include file="Public:welcome" />

<div id="user-nav" class="navbar navbar-inverse">
    <ul class="nav">
        <li class="dropdown" id="menu-messages"><a href="javascript:;" data-toggle="dropdown" data-target="#menu-messages" class="dropdown-toggle"><i class="icon icon-envelope"></i><span class="text">消息</span><span id="span_UnreadComMessageCount" class="label label-important" style="display:none">0</span><b class="caret"></b></a><ul id="ul_ComMessage" class="dropdown-menu"></ul></li>
        
        <li><a href="/Home/HelpPage" target="_blank"><span class="text">帮助</span></a></li>
    </ul>
</div>

    <if condition="$ComId eq 0">
     <include file="Public:navigate" />
     <else />
    <include file="Public:navigate_other" />
     </if>
    
    <div id="content">
        <div id="breadcrumb"><a href="/Home/Index"><i class="icon-home"></i>欢迎</a><a href="javascript:;">其他管理</a><a href="/ComManage/ComInit_Oper" class="current">网站设置</a></div>
        
        <div class="container-fluid">
            

<div class="row-fluid" id="wall">
    <div class="span12">
        <div class="widget-box">
            <div class="widget-title">
                <span class="icon">
                    <i class="icon-align-justify"></i>
                </span>
                <h5>修改扩展信息</h5>
            </div>
            <div class="widget-content nopadding">
                <form id="operForm" action="#" method="POST" class="form-horizontal">
                    <div class="control-group">
                        <label class="control-label">注册模式：</label>
                        <div class="controls">
                                <volist name="dictionary.EmumRegistType" id="my_item">
                                <label style="padding-top: 5px">
                                    <input type="checkbox" name="ResType" style="vertical-align:top"  value="{$my_item}" />
                                    {$key}</label>
                                </volist>
                        </div>
                    </div>
                    <div class="control-group">
                        <label class="control-label">主题：</label>
                        <div class="controls">
                            <select id="ThemeId" name="ThemeId">
                            <volist name="theme_list" id="my_item">
                                    <option value="{$my_item.ThemeId}" imgUrl="{$my_item.ThemeImg}" >{$my_item.ThemeName}</option>
                            </volist>
                            </select>
                        </div>
                    </div>
                    <div class="control-group">
                        <label class="control-label">直播历史展示时间区间：</label>
                        <div class="controls">
                            <input type="text" placeholder="0~30" maxlength="2"  name="ComShowSpan" id="ComShowSpan" style="width:80px;"  value="{$item.ComShowSpan}"  />
                            天
                        </div>
                    </div>
                    <div class="control-group">
                        <label class="control-label">是否显示直播状态：</label>
                        <div class="controls">
                            <label style="padding-top: 5px">
                                <input type="radio" name="ComShowState" value="1" style="vertical-align: top" <if condition="$item.ComShowState eq 1">checked='checked'</if> >
                                显示</label>
                            <label style="padding-top: 5px">
                                <input type="radio" name="ComShowState" value="0" <if condition="$item.ComShowState eq 0">checked='checked'</if> style="vertical-align: top" >
                                不显示</label>
                        </div>
                    </div>
                    <div class="control-group">
                        <label class="control-label">直播内容排序：</label>
                        <div class="controls">
                            <label style="padding-top: 5px">
                                <input type="radio" name="ComShowAsc" value="0" style="vertical-align: top" <if condition="$item.ComShowAsc eq 0">checked='checked'</if> >
                                正序</label>
                            <label style="padding-top: 5px">
                                <input type="radio" name="ComShowAsc" value="1" style="vertical-align: top" <if condition="$item.ComShowAsc eq 1">checked='checked'</if> >
                                倒序</label>
                        </div>
                    </div>
                    <div class="control-group">
                        <label class="control-label">首页和直播室首页展示：</label>
                        <div class="controls">
                            <label style="padding-top: 5px; width: 120px">
                                <input type="radio" name="ShowType" value="1" style="vertical-align: top" <if condition="$item.ShowType eq 1">checked="checked"</if> >
                                分析师信息</label>
                            <label style="padding-top: 5px; width: 120px">
                                <input type="radio" name="ShowType" value="0" style="vertical-align: top" <if condition="$item.ShowType eq 0">checked="checked"</if>>
                                直播内容</label>
                        </div>
                    </div>
                    <div class="form-actions">
                        <input type="hidden" name="restypes" id="restypes" value='' />
                        <button type="button" onclick="save();" class="btn btn-primary">保存</button>
                    </div>
                </form>
            </div>
        </div>
    </div>
</div>


            
        </div>
    </div>
    <script type="text/javascript" src="__PUBLIC__/Azureadmin/Scripts/Lib/jquery.js"></script>
    <script type="text/javascript" src="__PUBLIC__/Azureadmin/Scripts/Lib/bootstrap.js"></script>
    <script type="text/javascript" src="__PUBLIC__/Azureadmin/Scripts/Lib/menu.js"></script>
    <script type="text/javascript" src="__PUBLIC__/Azureadmin/Scripts/Lib/require.js"></script>
    <script type="text/javascript" src="__PUBLIC__/Azureadmin/Scripts/config.js"></script>
    <script type="text/javascript" src="__PUBLIC__/Azureadmin/Scripts/common.js"></script>

    <script type="text/javascript">
        $('#breadcrumb a:last-child').css('background-image', 'none');
        $(window).resize(function () {
            var height = $('#sidebar>ul').height() + 100;
            if (height < 600) {
                height = 600;
            }
            $('#content').css('min-height', height + 'px');
        }).resize();
    </script>
    
    <script src="__PUBLIC__/Azureadmin/Scripts/Lib/uploadify/jquery.uploadify.min.js?"+Math.random()></script>
    <script src="__PUBLIC__/Azureadmin/Scripts/Lib/jquery.inputmask.js"></script>
    <script type="text/javascript">
        // 计算页面的实际高度，iframe自适应会用到
        $(function () {
            $("input[name=ResType]").each(function (i, item) {
                if ("{$item.ResType}".indexOf($(item).val()) > -1) {
                    $(item).attr("checked", "checked");
                }
            });

            //$("#ResType").val(20);
            $("#ThemeId").val({$item.ThemeId});
            $("#ThemeId").change(function () {
                //切换预览图
                //alert($(this).find(":selected").attr("imgUrl"));
            });

            $("#ComShowSpan").on("keydown", function (e) {

                if (e.keyCode === 9 || e.keyCode === 8) {
                    return true;
                }
                if ($(this).val() !== "" && $(this).val() === "0") {
                    return false;
                }
                if ((e.keyCode >= 48 && e.keyCode <= 57) || (e.keyCode >= 96 && e.keyCode <= 105)) {
                    return true;
                }
                return false;
            });
            $("#ComShowSpan").on("keyup", function () {
                if (isNaN($(this).val()) || parseInt($(this).val()) > 30) {
                    $(this).val("");
                }
            });

        });

        function save() {
            var check = true;
            $(".controls input[type='checkbox']").each(function () {
                if (!$(this).attr("checked")) {
                    check = false;
                } else {
                    check = true;
                    return false;
                }
            });
            var restype = '';
            $("input[name=ResType]").each(function (i, item) {
                if ($(item).attr("checked") == "checked") {
                    restype += $(item).val()+'';
                }
            });
            $('#restypes').val(restype);
            if (check) {
                $.ajax({
                    type: "POST",
                    url: controller+"/ComManager/SaveComInit/",
                    data: $('#operForm').serialize(),
                    success: function (json) {
                        require(["dialog"], function (dia) {
                            if (json.res == 1) {
                                dia.SuccessBox("保存成功.", function () {
                                    parent.window.location.reload();
                                });
                            } else {
                                dia.ErrorBox("保存失败.");
                            }
                        });
                    },
                    error: function () {
                        require(["dialog"], function (dia) {
                            dia.ErrorBox("保存失败.");
                        });
                    }
                });
            } else {
                require(["dialog"], function (dia) {
                    dia.ErrorBox("请选择注册模式.");
                });
            }

        }
    </script>


</body>
</html>
